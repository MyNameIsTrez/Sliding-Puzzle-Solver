{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "build",
			"type": "shell",
			"command": "C:/msys64/usr/bin/make.exe",
			"group": "build"
		},
		{
			"label": "clean",
			"type": "shell",
			"command": "C:/msys64/usr/bin/make.exe",
			"args": [
				"clean"
			],
			"group": "none"
		},
		{
			"label": "fclean",
			"type": "shell",
			"command": "C:/msys64/usr/bin/make.exe",
			"args": [
				"fclean"
			],
			"group": "none"
		},
		{
			"label": "re",
			"type": "shell",
			"command": "C:/msys64/usr/bin/make.exe",
			"args": [
				"re"
			]
		},
		{
			"label": "run",
			"type": "shell",
			"command": "C:/msys64/usr/bin/make.exe",
			"args": [
				"run"
			]
		},
		{
			"type": "shell",
			"label": "C++ build",
			"osx": {
				"command": "/Users/sbos/.brew/bin/c++-11"
			},
			"linux": {
				"command": "/usr/bin/g++"
			},
			"args": [
				"-Wall",
				"-Wextra",
				"-Werror",
				"-g3",
				"-std=c++17",
				"-pthread",
				"-O3",
				// "-fsanitize=address",
				"${workspaceFolder}/code/cpp/src/*.cpp",
				"-o",
				"${workspaceFolder}/puzzle"
			],
			"options": {
				"cwd": "/usr/bin"
			},
			"problemMatcher": ["$gcc"],
			"group": {
				"kind": "build",
				"isDefault": true
			}
		},
		// {
		// 	"type": "shell",
		// 	"label": "test.cpp build",
		// 	"command": "/usr/bin/g++",
		// 	"args": [
		// 		"-Wall",
		// 		"-Wextra",
		// 		"-Werror",
		// 		"-g3",
		// 		"-std=c++17",
		// 		"-pthread",
		// 		// "-fsanitize=address",
		// 		// "-O3",
		// 		"${workspaceFolder}/test.cpp",
		// 		"-o",
		// 		"${workspaceFolder}/test"
		// 	],
		// 	"options": {
		// 		"cwd": "/usr/bin"
		// 	},
		// 	"problemMatcher": ["$gcc"],
		// 	"group": {
		// 		"kind": "build",
		// 		"isDefault": true
		// 	}
		// },
		{
			"type": "shell",
			"label": "hyperfine",
			"command": "hyperfine",
			"args": [
				// "--warmup",
				// "2",
				"--runs",
				"1",
				"./${input:binary_1}",
				"./${input:binary_2}"
			],
			"problemMatcher": []
		},
		{
			"type": "shell",
			"label": "flamegraph",
			"command": "sudo perf record --call-graph dwarf ./${input:binary_1} && sudo perf script | sudo ~/Programming/inferno/target/release/inferno-collapse-perf | sudo ~/Programming/inferno/target/release/inferno-flamegraph > flamegraph.svg",
			"problemMatcher": []
		}
	],
	"inputs": [
		{
			"id": "binary_1",
			"description": "Binary 1",
			"default": "puzzle",
			"type": "promptString"
		},
		{
			"id": "binary_2",
			"description": "Binary 2",
			"default": "puzzle",
			"type": "promptString"
		}
	]
}
